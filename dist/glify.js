parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"OTlA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CanvasOverlay=void 0;var t=require("leaflet");class e extends t.Layer{constructor(t,e){super(),this._userDrawFunc=t,this._frame=null,this._redrawCallbacks=[],this._pane=e}drawing(t){return this._userDrawFunc=t,this}params(e){return t.Util.setOptions(this,e),this}redraw(e){return"function"==typeof e&&this._redrawCallbacks.push(e),null===this._frame&&(this._frame=t.Util.requestAnimFrame(this._redraw,this)),this}isAnimated(){return Boolean(this._map.options.zoomAnimation&&t.Browser.any3d)}onAdd(e){var s;this._map=e;const a=this.canvas=null!==(s=this.canvas)&&void 0!==s?s:document.createElement("canvas"),i=e.getSize(),n=this.isAnimated();a.width=i.x,a.height=i.y,a.className=`leaflet-zoom-${n?"animated":"hide"}`;const o=e.getPane(this._pane);if(!o)throw new Error("unable to find pane");return o.appendChild(this.canvas),e.on("moveend",this._reset,this),e.on("resize",this._resize,this),n&&e.on("zoomanim",t.Layer?this._animateZoom:this._animateZoomNoLayer,this),this._reset(),this}onRemove(e){if(this.canvas){const t=e.getPane(this._pane);if(!t)throw new Error("unable to find pane");t.removeChild(this.canvas)}return e.off("moveend",this._reset,this),e.off("resize",this._resize,this),this.isAnimated()&&e.off("zoomanim",t.Layer?this._animateZoom:this._animateZoomNoLayer,this),this}addTo(t){return t.addLayer(this),this}get map(){return this._map}set map(t){this._map=t}_resize(t){this.canvas&&(this.canvas.width=t.newSize.x,this.canvas.height=t.newSize.y)}_reset(){if(this.canvas){const e=this._map.containerPointToLayerPoint([0,0]);t.DomUtil.setPosition(this.canvas,e)}this._redraw()}_redraw(){const{_map:e,canvas:s}=this,a=e.getSize(),i=e.getBounds(),n=180*a.x/(20037508.34*(i.getEast()-i.getWest())),o=e.getZoom(),r=new t.LatLng(i.getNorth(),i.getWest()),h=this._unclampedProject(r,0);for(s&&this._userDrawFunc({bounds:i,canvas:s,offset:h,scale:Math.pow(2,o),size:a,zoomScale:n,zoom:o});this._redrawCallbacks.length>0;){const t=this._redrawCallbacks.shift();t&&t(this)}this._frame=null}_animateZoom(e){const{_map:s,canvas:a}=this,i=s.getZoomScale(e.zoom,s.getZoom()),n=this._unclampedLatLngBoundsToNewLayerBounds(s.getBounds(),e.zoom,e.center).min;a&&n&&t.DomUtil.setTransform(a,n,i)}_animateZoomNoLayer(e){const{_map:s,canvas:a}=this;if(a){const i=s.getZoomScale(e.zoom,s.getZoom()),n=s._getCenterOffset(e.center)._multiplyBy(-i).subtract(s._getMapPanePos());t.DomUtil.setTransform(a,n,i)}}_unclampedProject(e,s){var a;const{crs:i}=this._map.options,{R:n}=i.projection,o=Math.PI/180,r=e.lat,h=Math.sin(r*o),m=new t.Point(n*e.lng*o,n*Math.log((1+h)/(1-h))/2),c=null!==(a=null==i?void 0:i.scale(s))&&void 0!==a?a:0;return i.transformation._transform(m,c)}_unclampedLatLngBoundsToNewLayerBounds(e,s,a){const i=this._map._getNewPixelOrigin(a,s);return new t.Bounds([this._unclampedProject(e.getSouthWest(),s).subtract(i),this._unclampedProject(e.getNorthWest(),s).subtract(i),this._unclampedProject(e.getSouthEast(),s).subtract(i),this._unclampedProject(e.getNorthEast(),s).subtract(i)])}}exports.CanvasOverlay=e;
},{}],"uVJX":[function(require,module,exports) {
"use strict";function e(e){return`"${e}" not properly defined`}Object.defineProperty(exports,"__esModule",{value:!0}),exports.notProperlyDefined=e;
},{}],"eMRn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MapMatrix=void 0;class t{constructor(){this.array=new Float32Array(16)}setSize(t,r){return this.array.set([2/t,0,0,0,0,-2/r,0,0,0,0,0,0,-1,1,0,1]),this}translateTo(t,r){const{array:s}=this;return s[12]=s[0]*t-1,s[13]=s[5]*r+1,this}scaleTo(t){const{array:r}=this;return r[0]*=t,r[5]*=t,this}}exports.MapMatrix=t;
},{}],"B7Ta":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseGlLayer=exports.defaults=exports.defaultHoverWait=exports.defaultPane=void 0;var t=require("./canvas-overlay"),e=require("./errors"),r=require("./map-matrix");function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach(function(e){n(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const o="overlayPane";exports.defaultPane=o;const a=250;exports.defaultHoverWait=a;const h={pane:o};exports.defaults=h;class u{constructor(i){var n,o;this.bytes=0,this.buffers={},this.attributeLocations={},this.uniformLocations={},this.settings=s({},h,{},i),this.mapMatrix=new r.MapMatrix,this.active=!0,this.vertexShader=null,this.fragmentShader=null,this.program=null,this.matrix=null,this.vertices=null,this.vertexLines=null;const a=Boolean(i.preserveDrawingBuffer),u=this.layer=new t.CanvasOverlay(t=>this.drawOnCanvas(t),this.pane).addTo(this.map);if(!u.canvas)throw new Error((0,e.notProperlyDefined)("layer.canvas"));const l=this.canvas=u.canvas;l.width=l.clientWidth,l.height=l.clientHeight,l.style.position="absolute",this.className&&(l.className+=" "+this.className),this.gl=null!==(o=null!==(n=l.getContext("webgl2",{preserveDrawingBuffer:a}))&&void 0!==n?n:l.getContext("webgl",{preserveDrawingBuffer:a}))&&void 0!==o?o:l.getContext("experimental-webgl",{preserveDrawingBuffer:a})}get data(){if(!this.settings.data)throw new Error((0,e.notProperlyDefined)("settings.data"));return this.settings.data}get pane(){var t;return null!==(t=this.settings.pane)&&void 0!==t?t:o}get className(){var t;return null!==(t=this.settings.className)&&void 0!==t?t:""}get map(){if(!this.settings.map)throw new Error((0,e.notProperlyDefined)("settings.map"));return this.settings.map}get sensitivity(){if("number"!=typeof this.settings.sensitivity)throw new Error((0,e.notProperlyDefined)("settings.sensitivity"));return this.settings.sensitivity}get sensitivityHover(){if("number"!=typeof this.settings.sensitivityHover)throw new Error((0,e.notProperlyDefined)("settings.sensitivityHover"));return this.settings.sensitivityHover}get hoverWait(){var t;return null!==(t=this.settings.hoverWait)&&void 0!==t?t:a}get longitudeKey(){if("number"!=typeof this.settings.longitudeKey)throw new Error((0,e.notProperlyDefined)("settings.longitudeKey"));return this.settings.longitudeKey}get latitudeKey(){if("number"!=typeof this.settings.latitudeKey)throw new Error((0,e.notProperlyDefined)("settings.latitudeKey"));return this.settings.latitudeKey}get opacity(){if("number"!=typeof this.settings.opacity)throw new Error((0,e.notProperlyDefined)("settings.opacity"));return this.settings.opacity}get color(){var t;return null!==(t=this.settings.color)&&void 0!==t?t:null}attachShaderVariables(t){if(0===this.getShaderVariableCount())return this;const{gl:e,settings:r}=this,{shaderVariables:i}=r;let s=0;for(const n in i){if(!i.hasOwnProperty(n))continue;const r=i[n],o=this.getAttributeLocation(n);if(o<0)throw new Error("shader variable "+n+" not found");e.vertexAttribPointer(o,r.size,e[r.type],!!r.normalize,this.bytes*t,s*t),s+=r.size,e.enableVertexAttribArray(o)}return this}getShaderVariableCount(){var t;return Object.keys(null!==(t=this.settings.shaderVariables)&&void 0!==t?t:{}).length}setData(t){return this.settings=s({},this.settings,{data:t}),this.render()}setup(){const t=this.settings;return t.click&&t.setupClick&&t.setupClick(this.map),t.hover&&t.setupHover&&t.setupHover(this.map,this.hoverWait),this.setupVertexShader().setupFragmentShader().setupProgram()}setupVertexShader(){const{gl:t,settings:r}=this,i="function"==typeof r.vertexShaderSource?r.vertexShaderSource():r.vertexShaderSource,s=t.createShader(t.VERTEX_SHADER);if(!s)throw new Error("Not able to create vertex");if(!i)throw new Error((0,e.notProperlyDefined)("settings.vertexShaderSource"));return t.shaderSource(s,i),t.compileShader(s),this.vertexShader=s,this}setupFragmentShader(){const t=this.gl,r=this.settings,i="function"==typeof r.fragmentShaderSource?r.fragmentShaderSource():r.fragmentShaderSource,s=t.createShader(t.FRAGMENT_SHADER);if(!s)throw new Error("Not able to create fragment");if(!i)throw new Error((0,e.notProperlyDefined)("settings.fragmentShaderSource"));return t.shaderSource(s,i),t.compileShader(s),this.fragmentShader=s,this}setupProgram(){const{gl:t,vertexShader:r,fragmentShader:i}=this,s=t.createProgram();if(!s)throw new Error("Not able to create program");if(!r)throw new Error((0,e.notProperlyDefined)("this.vertexShader"));if(!i)throw new Error((0,e.notProperlyDefined)("this.fragmentShader"));return t.attachShader(s,r),t.attachShader(s,i),t.linkProgram(s),t.useProgram(s),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.BLEND),this.program=s,this}addTo(t){return this.layer.addTo(null!=t?t:this.map),this.active=!0,this.render()}remove(t){if(void 0===t)this.map.removeLayer(this.layer),this.active=!1;else{const e=this.settings.data.features||this.settings.data;"number"==typeof(t=t instanceof Array?t:[t])&&(t=[t]),t.sort((t,e)=>t-e).reverse().forEach(t=>{e.splice(t,1)}),this.render()}return this}insert(t,e){return(this.settings.data.features||this.settings.data).splice(e,0,t),this.render()}update(t,e){return(this.settings.data.features||this.settings.data)[e]=t,this.render()}getBuffer(t){if(!this.buffers[t]){const e=this.gl.createBuffer();if(!e)throw new Error("Not able to create buffer");this.buffers[t]=e}return this.buffers[t]}getAttributeLocation(t){if(!this.program)throw new Error((0,e.notProperlyDefined)("this.program"));return void 0!==this.attributeLocations[t]?this.attributeLocations[t]:this.attributeLocations[t]=this.gl.getAttribLocation(this.program,t)}getUniformLocation(t){if(!this.program)throw new Error((0,e.notProperlyDefined)("this.program"));if(void 0!==this.uniformLocations[t])return this.uniformLocations[t];const r=this.gl.getUniformLocation(this.program,t);if(!r)throw new Error("Cannot find location");return this.uniformLocations[t]=r}click(t,e){if(!this.settings.click)return;const r=this.settings.click(t,e);return void 0!==r?r:void 0}hover(t,e){if(!this.settings.hover)return;const r=this.settings.hover(t,e);return void 0!==r?r:void 0}hoverOff(t,e){this.settings.hoverOff&&this.settings.hoverOff(t,e)}}exports.BaseGlLayer=u,u.defaults=h;
},{"./canvas-overlay":"OTlA","./errors":"uVJX","./map-matrix":"eMRn"}],"lpyx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromHex=c,exports.random=u,exports.pallet=g,exports.grey=exports.gray=exports.black=exports.white=exports.yellow=exports.teal=exports.blue=exports.red=exports.green=void 0;const r={r:0,g:1,b:0,a:1};exports.green=r;const e={r:1,g:0,b:0,a:1};exports.red=e;const t={r:0,g:0,b:1,a:1};exports.blue=t;const o={r:0,g:1,b:1,a:1};exports.teal=o;const s={r:1,g:1,b:0,a:1};exports.yellow=s;const a={r:1,g:1,b:1,a:1};exports.white=a;const n={r:0,g:0,b:0,a:1};exports.black=n;const p={r:.5,g:.5,b:.5,a:1};exports.gray=p;const x=p;function c(r){if(r.length<6)return null;return"#"===(r=r.toLowerCase())[0]&&(r=r.substring(1,r.length)),{r:parseInt(r[0]+r[1],16)/255,g:parseInt(r[2]+r[3],16)/255,b:parseInt(r[4]+r[5],16)/255,a:1}}function u(){return{r:Math.random(),g:Math.random(),b:Math.random(),a:Math.random()}}function g(){switch(Math.round(4*Math.random())){case 0:return r;case 1:return e;case 2:return t;case 3:return o;case 4:default:return s}}exports.grey=x;
},{}],"GtdH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LineFeatureVertices=void 0;var t=require("leaflet");class e{constructor(t){this.pixels=[],this.latLngs=[],this.settings=t,this.vertexCount=0,this.array=[]}get length(){return this.array.length}fillFromCoordinates(e){var s;const{color:r,opacity:i,project:o,latitudeKey:n,longitudeKey:a}=this.settings;for(let h=0;h<e.length;h++){if(Array.isArray(e[h][0])){this.fillFromCoordinates(e[h]);continue}const l=e,u=new t.LatLng(l[h][n],l[h][a]);this.latLngs.push(u);const c=o(u,0);this.pixels.push(c),this.push(c.x,c.y,r.r,r.g,r.b,null!==(s=r.a)&&void 0!==s?s:i),0!==h&&h!==e.length-1&&(this.vertexCount+=1),this.vertexCount+=1}}push(...t){this.array.push(...t)}}exports.LineFeatureVertices=e;
},{}],"UnXq":[function(require,module,exports) {
"use strict";function t(t,n){const o=Math.PI/180,e=4*Math.PI,r=Math.sin(t*o);return{x:(n+180)/360*256,y:256*(.5-Math.log((1+r)/(1-r))/e)}}function n(t,n,o){return(t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y)<=o*o}function o(t,n,o,e,r,l){const i=r-o,u=l-e,s=i*i+u*u;let c,a,x=-1;0!==s&&(x=((t-o)*i+(n-e)*u)/s),x<0?(c=o,a=e):x>1?(c=r,a=l):(c=o+x*i,a=e+x*u);const p=t-c,d=n-a;return Math.sqrt(p*p+d*d)}function e(t,n){return Math.sqrt(t*t+n*n)}function r(t,n,o){const r=o.latLngToLayerPoint(t),l=o.latLngToLayerPoint(n);return e(r.x-l.x,r.y-l.y)}function l(t){const n=document.createElement("div"),o=n.style,e=t.x,r=t.y;o.left=`${e}px`,o.top=`${r}px`,o.width="10px",o.height="10px",o.position="absolute",o.backgroundColor="#"+(16777215*Math.random()<<0).toString(16),document.body.appendChild(n)}function i(t,n,o){let e=null;return function(r){const l=o&&!e;null!==e&&clearTimeout(e),e=setTimeout(function(){e=null,o||t(r)},n),l&&t(r)}}function u(t,n){const o=n.getNorthEast(),e=n.getSouthWest();return o.lat>t.lat&&t.lat>e.lat&&o.lng>t.lng&&t.lng>e.lng}Object.defineProperty(exports,"__esModule",{value:!0}),exports.latLonToPixel=t,exports.pixelInCircle=n,exports.latLngDistance=o,exports.vectorDistance=e,exports.locationDistance=r,exports.debugPoint=l,exports.debounce=i,exports.inBounds=u;
},{}],"ogHp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Lines=void 0;var t=require("leaflet"),e=require("./base-gl-layer"),r=o(require("./color")),i=require("./line-feature-vertices"),n=require("./utils");function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=i?Object.getOwnPropertyDescriptor(t,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=t[n]}return r.default=t,e&&e.set(t,r),r}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach(function(e){c(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const f={data:{type:"FeatureCollection",features:[]},color:r.random,className:"",opacity:.5,weight:2,sensitivity:.1,sensitivityHover:.03,shaderVariables:{vertex:{type:"FLOAT",start:0,size:2},color:{type:"FLOAT",start:2,size:4}}};class u extends e.BaseGlLayer{constructor(t){if(super(t),this.scale=1/0,this.bytes=6,this.allVertices=[],this.allVerticesTyped=new Float32Array(0),this.vertices=[],this.aPointSize=-1,this.hoveringFeatures=[],this.settings=l({},u.defaults,{},t),!t.data)throw new Error('"data" is missing');this.active=!0,this.setup().render()}get weight(){if(!this.settings.weight)throw new Error("settings.weight not correctly defined");return this.settings.weight}render(){this.resetVertices();const{canvas:t,gl:e,layer:r,mapMatrix:i}=this,n=this.getBuffer("vertex");e.bindBuffer(e.ARRAY_BUFFER,n);const s=this.allVerticesTyped.BYTES_PER_ELEMENT;e.bufferData(e.ARRAY_BUFFER,this.allVerticesTyped,e.STATIC_DRAW);const o=this.getAttributeLocation("vertex");return e.vertexAttribPointer(o,2,e.FLOAT,!1,s*this.bytes,0),e.enableVertexAttribArray(o),this.matrix=this.getUniformLocation("matrix"),this.aPointSize=this.getAttributeLocation("pointSize"),i.setSize(t.width,t.height),e.viewport(0,0,t.width,t.height),e.uniformMatrix4fv(this.matrix,!1,i.array),this.attachShaderVariables(s),r.redraw(),this}resetVertices(){const{map:t,opacity:e,color:r,weight:n,latitudeKey:s,longitudeKey:o,data:a,bytes:l,settings:c}=this,{eachVertex:f}=c,{features:u}=a,h=u.length;let g,y,p=null,d=null,v=0;"function"==typeof r&&(p=r),"function"==typeof n&&(d=n);const b=t.project.bind(t),w=[];for(;v<h;v++){g=u[v],y=p?p(v,g):r;const t=d?d(v,g):n,a=new i.LineFeatureVertices({project:b,latitudeKey:s,longitudeKey:o,color:y,weight:t,opacity:e});a.fillFromCoordinates(g.geometry.coordinates),w.push(a),f&&f(a)}const O=w.length,m=[];for(let i=0;i<O;i++){const t=w[i].array,e=t.length/l;for(let r=0;r<e;r++){const i=r*l;0!==r&&r!==e-1&&m.push(t[i],t[i+1],t[i+2],t[i+3],t[i+4],t[i+5]),m.push(t[i],t[i+1],t[i+2],t[i+3],t[i+4],t[i+5])}}return this.vertices=w,this.allVertices=m,this.allVerticesTyped=new Float32Array(m),this}drawOnCanvas(t){if(!this.gl)return this;const{gl:e,data:r,canvas:i,mapMatrix:n,matrix:s,allVertices:o,vertices:a,weight:l,aPointSize:c,bytes:f}=this,{scale:u,offset:h,zoom:g}=t;this.scale=u;const y=Math.max(g-4,4);if(e.clear(e.COLOR_BUFFER_BIT),e.viewport(0,0,i.width,i.height),e.vertexAttrib1f(c,y),n.setSize(i.width,i.height).scaleTo(u),g>18)n.translateTo(-h.x,-h.y),e.uniformMatrix4fv(s,!1,n.array),e.drawArrays(e.LINES,0,o.length/f);else if("number"==typeof l)for(let p=-l;p<=l;p+=.5)for(let t=-l;t<=l;t+=.5)n.translateTo(-h.x+t/u,-h.y+p/u),e.uniformMatrix4fv(s,!1,n.array),e.drawArrays(e.LINES,0,o.length/f);else if("function"==typeof l){let t=0;const{features:i}=r;for(let r=0;r<a.length;r++){const s=a[r],{vertexCount:o}=s,c=l(r,i[r]);for(let r=-c;r<=c;r+=.5)for(let i=-c;i<=c;i+=.5)n.translateTo(-h.x+i/u,-h.y+r/u),e.uniformMatrix4fv(this.matrix,!1,n.array),e.drawArrays(e.LINES,t,o);t+=o}}return this}static tryClick(t,e,r){let i=null,s=null;if(r.forEach(r=>{const{latitudeKey:o,longitudeKey:a,sensitivity:l,weight:c,scale:f,active:u}=r;function h(e,c,u,h){(0,n.latLngDistance)(t.latlng.lng,t.latlng.lat,c[a],c[o],e[a],e[o])<=l+h/f&&(i=u,s=r)}u&&r.map===e&&r.data.features.forEach((t,e)=>{const r="function"==typeof c?c(e,t):c,{coordinates:i,type:n}=t.geometry;if("LineString"===n)for(let s=1;s<i.length;s++)h(i[s],i[s-1],t,r);else if("MultiLineString"===n)for(let s=0;s<i.length;s++){const e=i[s];for(let n=0;n<e.length;n++)if(0===n&&s>0){const e=i[s-1];h(e[e.length-1],i[s][n],t,r)}else n>0&&h(i[s][n],i[s][n-1],t,r)}})}),s&&i){const e=s.click(t,i);return void 0!==e?e:void 0}}static tryHover(e,r,i){const s=[];return i.forEach(i=>{const{sensitivityHover:o,latitudeKey:a,longitudeKey:l,data:c,hoveringFeatures:f,weight:u,scale:h}=i;function g(t,r,i,s){return(0,n.latLngDistance)(e.latlng.lng,e.latlng.lat,r[l],r[a],t[l],t[a])<=o+s/h&&(p.includes(i)||p.push(i),!y.includes(i))}if(!i.active)return;if(r!==i.map)return;const y=f,p=[];i.hoveringFeatures=p;const d=(0,t.geoJSON)(c.features).getBounds();(0,n.inBounds)(e.latlng,d)&&c.features.forEach((t,r)=>{const n="function"==typeof u?u(r,t):u,{coordinates:o,type:a}=t.geometry;let l=!1;if("LineString"===a)for(let e=1;e<o.length&&!(l=g(o[e],o[e-1],t,n));e++);else if("MultiLineString"===a)for(let e=0;e<o.length;e++){const r=o[e];for(let i=0;i<r.length;i++)if(0===i&&e>0){const r=o[e-1];if(l=g(r[r.length-1],o[e][i],t,n))break}else if(i>0&&(l=g(o[e][i],o[e][i-1],t,n)))break}if(l){const r=i.hover(e,t);void 0!==r&&s.push(r)}});for(let t=0;t<y.length;t++){const r=y[t];p.includes(r)||i.hoverOff(e,r)}}),s}}exports.Lines=u,u.defaults=f;
},{"./base-gl-layer":"B7Ta","./color":"lpyx","./line-feature-vertices":"GtdH","./utils":"UnXq"}],"IieH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Points=void 0;var t=require("./base-gl-layer"),e=n(require("./color")),r=require("leaflet"),o=require("./utils");function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var s=o?Object.getOwnPropertyDescriptor(t,n):null;s&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=t[n]}return r.default=t,e&&e.set(t,r),r}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach(function(e){l(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const c={color:e.random,opacity:.8,className:"",sensitivity:2,sensitivityHover:.03,shaderVariables:{vertex:{type:"FLOAT",start:0,size:2},color:{type:"FLOAT",start:2,size:4},pointSize:{type:"FLOAT",start:6,size:1}}};class u extends t.BaseGlLayer{constructor(t){var e;super(t),this.bytes=7,this.latLngLookup={},this.allLatLngLookup=[],this.vertices=[],this.typedVertices=new Float32Array,this.settings=a({},c,{},t),this.active=!0;const{data:r,map:o}=this;if(Array.isArray(r))this.dataFormat="Array";else{if("FeatureCollection"!==r.type)throw new Error("unhandled data type. Supported types are Array and GeoJson.FeatureCollection");this.dataFormat="GeoJson.FeatureCollection"}"EPSG:3857"!==(null===(e=o.options.crs)||void 0===e?void 0:e.code)&&console.warn("layer designed for SphericalMercator, alternate detected"),this.setup().render()}get size(){return"number"==typeof this.settings.size?this.settings.size:"function"==typeof this.settings.size?this.settings.size:null}render(){this.resetVertices();const{gl:t,canvas:e,layer:r,vertices:o,mapMatrix:i}=this,n=this.matrix=this.getUniformLocation("matrix"),s=this.getBuffer("vertices"),a=this.typedVertices=new Float32Array(o),l=a.BYTES_PER_ELEMENT;return i.setSize(e.width,e.height),t.viewport(0,0,e.width,e.height),t.uniformMatrix4fv(n,!1,i.array),t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW),this.attachShaderVariables(l),r.redraw(),this}getPointLookup(t){return this.latLngLookup[t]||(this.latLngLookup[t]=[])}addLookup(t){return this.getPointLookup(t.key).push(t),this.allLatLngLookup.push(t),this}resetVertices(){var t,e,o,i,n,s;this.latLngLookup={},this.allLatLngLookup=[],this.vertices=[];const{vertices:l,settings:c,map:u,size:p,latitudeKey:h,longitudeKey:f,color:d,opacity:y,data:g}=this,{eachVertex:L}=c;let v,b,O,w,m,x,k,P=null;if(!d)throw new Error("color is not properly defined");if("function"==typeof d&&(P=d),!p)throw new Error("size is not properly defined");if("function"==typeof p&&(O=p),"Array"===this.dataFormat){const i=g.length;for(let n=0;n<i;n++){k=(w=g[n])[h].toFixed(2)+"x"+w[f].toFixed(2),m=new r.LatLng(w[h],w[f]),x=u.project(m,0),v=a({},v=P?P(n,m):d,{a:null!==(e=null!==(t=v.a)&&void 0!==t?t:y)&&void 0!==e?e:0}),b=O?O(n,m):p,l.push(x.x,x.y,v.r,v.g,v.b,null!==(o=v.a)&&void 0!==o?o:0,b);const i={latLng:m,key:k,pixel:x,chosenColor:v,chosenSize:b,feature:w};this.addLookup(i),L&&L(i)}}else if("GeoJson.FeatureCollection"===this.dataFormat){const t=g.features.length;for(let e=0;e<t;e++){const t=g.features[e];k=(w=t.geometry.coordinates)[h].toFixed(2)+"x"+w[f].toFixed(2),m=new r.LatLng(w[h],w[f]),x=u.project(m,0),v=a({},v=P?P(e,t):d,{a:null!==(n=null!==(i=v.a)&&void 0!==i?i:y)&&void 0!==n?n:0}),b=O?O(e,m):p,l.push(x.x,x.y,v.r,v.g,v.b,null!==(s=v.a)&&void 0!==s?s:0,b);const o={latLng:m,key:k,pixel:x,chosenColor:v,chosenSize:b,feature:t};this.addLookup(o),L&&L(o)}}return this}pointSize(t){const{map:e,size:r}=this,o="function"==typeof r?r(t,null):r,i=e.getZoom();return null===o?Math.max(i-4,1):o}drawOnCanvas(t){if(!this.gl)return this;const{gl:e,canvas:r,mapMatrix:o,matrix:i,map:n,allLatLngLookup:s}=this,{offset:a}=t,l=n.getZoom(),c=Math.pow(2,l);return o.setSize(r.width,r.height).scaleTo(c).translateTo(-a.x,-a.y),e.clear(e.COLOR_BUFFER_BIT),e.viewport(0,0,r.width,r.height),e.uniformMatrix4fv(i,!1,o.array),e.drawArrays(e.POINTS,0,s.length),this}lookup(t){const e=t.lat+.03,r=t.lng+.03,o=[];let i,n,s,a,l,c=t.lat-.03;for(;c<=e;c+=.01)for(i=t.lng-.03;i<=r;i+=.01)if(l=c.toFixed(2)+"x"+i.toFixed(2),a=this.latLngLookup[l])for(n=0,s=a.length;n<s;n++)o.push(a[n]);const{map:p}=this;return u.closest(t,o.length>0?o:this.allLatLngLookup,p)}static closest(t,e,r){return e.length<1?null:e.reduce((e,i)=>{return(0,o.locationDistance)(t,e.latLng,r)<(0,o.locationDistance)(t,i.latLng,r)?e:i})}static tryClick(t,e,r){const i=[],n={};let s,a,l=null;if(r.forEach(r=>{l=r.settings,r.active&&r.map===e&&null!==(a=r.lookup(t.latlng))&&(n[a.key]=r,i.push(a))}),i.length<1)return;if(!l)return;const c=this.closest(t.latlng,i,e);if(!c)return;const u=n[c.key];if(!u)return;const{sensitivity:p}=u,h=c.latLng,f=e.latLngToLayerPoint(h);return(0,o.pixelInCircle)(f,t.layerPoint,c.chosenSize*(null!=p?p:1))?void 0===(s=u.click(t,c.feature||c.latLng))||s:void 0}static tryHover(t,e,r){const i=[];return r.forEach(r=>{if(!r.active)return;if(r.map!==e)return;const n=r.lookup(t.latlng);if(n&&(0,o.pixelInCircle)(e.latLngToLayerPoint(n.latLng),t.layerPoint,n.chosenSize*r.sensitivityHover*30)){const e=r.hover(t,n.feature||n.latLng);void 0!==e&&i.push(e)}}),i}}exports.Points=u,u.defaults=c,u.maps=[];
},{"./base-gl-layer":"B7Ta","./color":"lpyx","./utils":"UnXq"}],"j8I8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Shapes=exports.defaults=void 0;var e=c(require("earcut")),t=c(require("polygon-lookup")),r=c(require("geojson-flatten")),o=require("leaflet"),i=require("./base-gl-layer"),n=u(require("./color")),s=require("./utils"),a=require("./errors");function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=o?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(r,i,n):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y={color:n.random,className:"",opacity:.5,borderOpacity:1,shaderVariables:{vertex:{type:"FLOAT",start:0,size:2},color:{type:"FLOAT",start:2,size:4}},border:!1};exports.defaults=y;class d extends i.BaseGlLayer{constructor(e){if(super(e),this.bytes=6,this.polygonLookup=null,this.settings=h({},d.defaults,{},e),!e.data)throw new Error((0,a.notProperlyDefined)("settings.data"));if(!e.map)throw new Error((0,a.notProperlyDefined)("settings.map"));this.setup().render()}get border(){if("boolean"!=typeof this.settings.border)throw new Error((0,a.notProperlyDefined)("settings.border"));return this.settings.border}get borderOpacity(){if("number"!=typeof this.settings.borderOpacity)throw new Error((0,a.notProperlyDefined)("settings.borderOpacity"));return this.settings.borderOpacity}render(){this.resetVertices();const{canvas:e,gl:t,layer:r,vertices:o,mapMatrix:i}=this,n=this.getBuffer("vertex"),s=new Float32Array(o),a=s.BYTES_PER_ELEMENT,l=this.getAttributeLocation("vertex");return t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,s,t.STATIC_DRAW),t.vertexAttribPointer(l,2,t.FLOAT,!1,a*this.bytes,0),t.enableVertexAttribArray(l),this.matrix=this.getUniformLocation("matrix"),t.viewport(0,0,e.width,e.height),i.setSize(e.width,e.height),t.uniformMatrix4fv(this.matrix,!1,i.array),this.attachShaderVariables(a),r.redraw(),this}resetVertices(){this.vertices=[],this.vertexLines=[],this.polygonLookup=new t.default;const{vertices:i,vertexLines:n,polygonLookup:l,map:u,border:c,opacity:f,borderOpacity:h,color:p,data:y}=this;let d,b,g,v,A,w,O,E,x,F,R=null,P=0;switch(y.type){case"Feature":l.loadFeatureCollection({type:"FeatureCollection",features:[y]}),g=(0,r.default)(y);break;case"MultiPolygon":{const e={type:"MultiPolygon",coordinates:y.coordinates};l.loadFeatureCollection({type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]}),g=(0,r.default)(y);break}default:l.loadFeatureCollection(y),g=y.features}const L=g.length;if(!p)throw new Error((0,a.notProperlyDefined)("settings.color"));for("function"==typeof p&&(R=p);P<L;P++){v=g[P],O=[];const t="number"==typeof(A=null!==R?R(P,v):p).a?A.a:f;if(w=(v.geometry||v).coordinates,!Array.isArray(w[0]))continue;x=e.default.flatten(w),E=(0,e.default)(x.vertices,x.holes,x.dimensions),F=w[0][0].length;const{longitudeKey:r,latitudeKey:a}=this;for(let e=0,o=E.length;e<o;e++){if(b=E[e],"number"!=typeof x.vertices[0])throw new Error("unhandled polygon");O.push(x.vertices[b*F+r],x.vertices[b*F+a])}for(let e=0,n=O.length;e<n;e)d=u.project(new o.LatLng(O[e++],O[e++]),0),i.push(d.x,d.y,A.r,A.g,A.b,t);if(c){const e=[];for(let t=1,r=x.vertices.length;t<r;t+=2)e.push(x.vertices[t],x.vertices[t-1]),e.push(x.vertices[t+2],x.vertices[t+1]);for(let t=0,r=e.length;t<r;t)d=(0,s.latLonToPixel)(e[t++],e[t++]),n.push(d.x,d.y,A.r,A.g,A.b,h)}}return this}drawOnCanvas(e){if(!this.gl)return this;const{scale:t,offset:r,canvas:o}=e,{mapMatrix:i,gl:n,vertices:s,settings:a,vertexLines:l,border:u}=this;if(i.setSize(o.width,o.height).scaleTo(t).translateTo(-r.x,-r.y),n.clear(n.COLOR_BUFFER_BIT),n.viewport(0,0,o.width,o.height),n.uniformMatrix4fv(this.matrix,!1,i.array),u){const e=this.getBuffer("vertexLines"),t=new Float32Array(l),r=t.BYTES_PER_ELEMENT,i=this.getAttributeLocation("vertex");n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ARRAY_BUFFER,e),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW),null!==this.settings.shaderVariables&&this.attachShaderVariables(r),n.vertexAttribPointer(i,3,n.FLOAT,!1,r*this.bytes,0),n.enableVertexAttribArray(i),n.enable(n.DEPTH_TEST),n.viewport(0,0,o.width,o.height),n.drawArrays(n.LINES,0,l.length/this.bytes);const u=this.getBuffer("vertex"),c=new Float32Array(s);n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ARRAY_BUFFER,u),n.bufferData(n.ARRAY_BUFFER,c,n.STATIC_DRAW),null!==a.shaderVariables&&this.attachShaderVariables(r),n.vertexAttribPointer(i,2,n.FLOAT,!1,r*this.bytes,0),n.enableVertexAttribArray(i),n.enable(n.DEPTH_TEST),n.viewport(0,0,o.width,o.height)}return n.drawArrays(n.TRIANGLES,0,s.length/this.bytes),this}static tryClick(e,t,r){let o=null,i=null;if(r.forEach(function(r){if(!r.active)return;if(r.map!==t)return;if(!r.polygonLookup)return;const n=r.polygonLookup.search(e.latlng.lng,e.latlng.lat);n&&(i=r,o=n)}),i&&o){const t=i.click(e,o);return void 0!==t?t:void 0}}static tryHover(e,t,r){const o=[];let i;return r.forEach(r=>{if(r.active&&r.map===t&&r.polygonLookup&&(i=r.polygonLookup.search(e.latlng.lng,e.latlng.lat))){const t=r.hover(e,i);void 0!==t&&o.push(t)}}),o}}exports.Shapes=d,d.defaults=y;
},{"./base-gl-layer":"B7Ta","./color":"lpyx","./utils":"UnXq","./errors":"uVJX"}],"LmkB":[function(require,module,exports) {
module.exports = `uniform mat4 matrix;
attribute vec4 vertex;
attribute vec4 color;
attribute float pointSize;
varying vec4 _color;

void main() {
  //set the size of the point
  gl_PointSize = pointSize;

  //multiply each vertex by a matrix.
  gl_Position = matrix * vertex;

  //pass the color to the fragment shader
  _color = color;
}
`
},{}],"hNM2":[function(require,module,exports) {
module.exports = `precision mediump float;
uniform vec4 color;

void main() {
    float border = 0.05;
    float radius = 0.5;
    vec2 center = vec2(0.5);

    vec4 color0 = vec4(0.0);
    vec4 color1 = vec4(color[0], color[1], color[2], color[3]);

    vec2 m = gl_PointCoord.xy - center;
    float dist = radius - sqrt(m.x * m.x + m.y * m.y);

    float t = 0.0;
    if (dist > border) {
        t = 1.0;
    } else if (dist > 0.0) {
        t = dist / border;
    }

    //works for overlapping circles if blending is enabled
    gl_FragColor = mix(color0, color1, t);
}
`
},{}],"XGkG":[function(require,module,exports) {
module.exports = `precision mediump float;
varying vec4 _color;

void main() {
  float border = 0.1;
  float radius = 0.5;
  vec2 center = vec2(0.5, 0.5);

  vec4 pointColor = vec4(
    _color[0],
    _color[1],
    _color[2],
    _color[3]
  );

  vec2 m = gl_PointCoord.xy - center;
  float dist1 = radius - sqrt(m.x * m.x + m.y * m.y);

  float t1 = 0.0;
  if (dist1 > border) {
      t1 = 1.0;
  } else if (dist1 > 0.0) {
      t1 = dist1 / border;
  }

  //works for overlapping circles if blending is enabled
  //gl_FragColor = mix(color0, color1, t);

  //border
  float outerBorder = 0.05;
  float innerBorder = 0.8;
  vec4 borderColor = vec4(0, 0, 0, 0.4);
  vec2 uv = gl_PointCoord.xy;
  vec4 clearColor = vec4(0, 0, 0, 0);

  // Offset uv with the center of the circle.
  uv -= center;

  float dist2 =  sqrt(dot(uv, uv));

  float t2 = 1.0 + smoothstep(radius, radius + outerBorder, dist2)
                - smoothstep(radius - innerBorder, radius, dist2);

  gl_FragColor = mix(mix(borderColor, clearColor, t2), pointColor, t1);
}
`
},{}],"AY9x":[function(require,module,exports) {
module.exports = `precision mediump float;
varying vec4 _color;

void main() {
  vec2 center = vec2(0.5);
  vec2 uv = gl_PointCoord.xy - center;
  float smoothing = 0.005;
  vec4 _color1 = vec4(_color[0], _color[1], _color[2], _color[3]);
  float radius1 = 0.3;
  vec4 _color2 = vec4(_color[0], _color[1], _color[2], _color[3]);
  float radius2 = 0.5;
  float dist = length(uv);

  //SMOOTH
  float gamma = 2.2;
  color1.rgb = pow(_color1.rgb, vec3(gamma));
  color2.rgb = pow(_color2.rgb, vec3(gamma));

  vec4 puck = mix(
    mix(
      _color1,
      _color2,
      smoothstep(
        radius1 - smoothing,
        radius1 + smoothing,
        dist
      )
    ),
    vec4(0,0,0,0),
      smoothstep(
        radius2 - smoothing,
        radius2 + smoothing,
        dist
    )
  );

  //Gamma correction (prevents color fringes)
  puck.rgb = pow(puck.rgb, vec3(1.0 / gamma));
  gl_FragColor = puck;
}
`
},{}],"R6F0":[function(require,module,exports) {
module.exports = `precision mediump float;
varying vec4 _color;

void main() {
    vec4 color1 = vec4(_color[0], _color[1], _color[2], _color[3]);

    //simple circles
    float d = distance (gl_PointCoord, vec2(0.5, 0.5));
    if (d < 0.5 ){
        gl_FragColor = color1;
    } else {
        discard;
    }
}
`
},{}],"sqgp":[function(require,module,exports) {
module.exports = `precision mediump float;
varying vec4 _color;

void main() {
    //squares
    gl_FragColor = vec4(_color[0], _color[1], _color[2], _color[3]);
}
`
},{}],"JKQp":[function(require,module,exports) {
module.exports = `precision mediump float;
varying vec4 _color;

void main() {
  gl_FragColor = vec4(
    _color[0],
    _color[1],
    _color[2],
    _color[3]
  );
}
`
},{}],"QCba":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.glify=exports.Glify=void 0;var e=require("./lines"),t=require("./points"),s=require("./shapes"),i=require("./utils"),r=p(require("./shader/vertex/default.glsl")),n=p(require("./shader/fragment/dot.glsl")),u=p(require("./shader/fragment/point.glsl")),o=p(require("./shader/fragment/puck.glsl")),h=p(require("./shader/fragment/simple-circle.glsl")),a=p(require("./shader/fragment/square.glsl")),l=p(require("./shader/fragment/polygon.glsl"));function p(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach(function(t){f(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const y={vertex:r.default,fragment:{dot:n.default,point:u.default,puck:o.default,simpleCircle:h.default,square:a.default,polygon:l.default}};class g{constructor(){this.longitudeKey=1,this.latitudeKey=0,this.clickSetupMaps=[],this.hoverSetupMaps=[],this.shader=y,this.Points=t.Points,this.Shapes=s.Shapes,this.Lines=e.Lines,this.pointsInstances=[],this.shapesInstances=[],this.linesInstances=[]}longitudeFirst(){return this.longitudeKey=0,this.latitudeKey=1,this}latitudeFirst(){return this.latitudeKey=0,this.longitudeKey=1,this}get instances(){return[...this.pointsInstances,...this.linesInstances,...this.shapesInstances]}points(e){const t=new this.Points(d({setupClick:this.setupClick.bind(this),setupHover:this.setupHover.bind(this),latitudeKey:v.latitudeKey,longitudeKey:v.longitudeKey,vertexShaderSource:()=>this.shader.vertex,fragmentShaderSource:()=>this.shader.fragment.point},e));return this.pointsInstances.push(t),t}lines(e){const t=new this.Lines(d({setupClick:this.setupClick.bind(this),setupHover:this.setupHover.bind(this),latitudeKey:this.latitudeKey,longitudeKey:this.longitudeKey,vertexShaderSource:()=>this.shader.vertex,fragmentShaderSource:()=>this.shader.fragment.polygon},e));return this.linesInstances.push(t),t}shapes(e){const t=new this.Shapes(d({setupClick:this.setupClick.bind(this),setupHover:this.setupHover.bind(this),latitudeKey:this.latitudeKey,longitudeKey:this.longitudeKey,vertexShaderSource:()=>this.shader.vertex,fragmentShaderSource:()=>this.shader.fragment.polygon},e));return this.shapesInstances.push(t),t}setupClick(e){this.clickSetupMaps.includes(e)||(this.clickSetupMaps.push(e),e.on("click",t=>{let s;return void 0!==(s=this.Points.tryClick(t,e,this.pointsInstances))?s:void 0!==(s=this.Lines.tryClick(t,e,this.linesInstances))?s:void 0!==(s=this.Shapes.tryClick(t,e,this.shapesInstances))?s:void 0}))}setupHover(e,t,s){this.hoverSetupMaps.includes(e)||(this.hoverSetupMaps.push(e),e.on("mousemove",(0,i.debounce)(t=>{this.Points.tryHover(t,e,this.pointsInstances),this.Lines.tryHover(t,e,this.linesInstances),this.Shapes.tryHover(t,e,this.shapesInstances)},null!=t?t:0,s)))}}exports.Glify=g;const v=new g;exports.glify=v;var b=v;exports.default=b,"undefined"!=typeof window&&window.L&&(window.L.glify=v,window.L.Glify=g);
},{"./lines":"ogHp","./points":"IieH","./shapes":"j8I8","./utils":"UnXq","./shader/vertex/default.glsl":"LmkB","./shader/fragment/dot.glsl":"hNM2","./shader/fragment/point.glsl":"XGkG","./shader/fragment/puck.glsl":"AY9x","./shader/fragment/simple-circle.glsl":"R6F0","./shader/fragment/square.glsl":"sqgp","./shader/fragment/polygon.glsl":"JKQp"}]},{},["QCba"], null)
//# sourceMappingURL=/glify.js.map